# アプリとしてビルドしよう

プレビュー画面を起動しているときは「JIT（Just-In-Time）コンパイル」という処理を行っています。
高速にプレビュー画面を更新することを目的とした処理です。

対して、リリース用にビルドするときは、「AOT（Ahead-Of-Time）コンパイル」という処理を行います。  
ユーザがその画面を表示するときの処理を事前に行っておくことにより、ユーザは快適にアプリを表示することができます。

AOT コンパイルするときは `--prod` オプションを最後に付けます。
これをつけないと JIT コンパイルになります。

## Web アプリとしてビルド

Web アプリとしてビルドするときは、以下のコマンドを実行します。

```shell
ionic build --prod
```

プロダクションビルド用の環境変数の取得や、ファイルの minify、AOT コンパイルなどが行われます。
AOT コンパイルが行われるので、JIT コンパイルする `ionic serve` よりも時間がかかります。

公開ファイルは、`www` ディレクトリに出力されます。
この中身をサーバ上にアップロードするとアプリを公開することができます。

## モバイルアプリとしてビルド

モバイルアプリとしてビルドするために、まず必要なパッケージをインストールします。

```shell
ionic integrations enable capacitor
```

### ビルドして iOS アプリとして動かす

```shell
ionic cap add ios
```

`cap` は `capacitor` の略です。

実行すると、`ios/` ディレクトリが作成されます。
この配下に、 iOS モバイルアプリとしてビルドするのに必要なファイルが作成されます。

`ionic build --prod` を実行していない状態でこのコマンドを実行するとエラーが発生します。

この場合、`ionic build --prod` を実行して、プロジェクトフォルダ内に `www` フォルダが生成されたのを確認してから、
再度 `ionic cap add ios` コマンドを実行ください。

完了したら、`ionic cap open ios` コマンドを実行し、Xcode を開きます。

### ビルドして Android アプリとして動かす

```shell
ionic cap add android
```

`ionic cap open android` コマンドを実行し、Android Studio を開きます。
